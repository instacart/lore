machine:
  pre:
    - cd /opt/circleci/.pyenv; git pull
    - pyenv install -s 2.7.15
    - pyenv install -s 3.6.5

dependencies:
  cache_directories:
    - '~/lore/.pyenv'
  pre:
    - createdb lore_test
  override:
    - pip install -e .
    - LORE_PYTHON_VERSION=2.7.15 lore test -s tests.unit.__init__
    - LORE_PYTHON_VERSION=3.6.5 lore test -s tests.unit.__init__

test:
   override:
     - LORE_PYTHON_VERSION=2.7.15 lore test
     - LORE_PYTHON_VERSION=3.6.5 lore test
